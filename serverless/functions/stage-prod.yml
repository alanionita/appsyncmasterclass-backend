setLogLevelAll:
  handler: functions/set-log-level.handler
  events:
    - schedule: cron(6 * * * ? *) # 6 mins past the hour every hour
  environment:
    APPSYNC_API_ID: !GetAtt GraphQlApi.ApiId
    FIELD_LOG_LEVEL: ALL
  iamRoleStatements:
    - Effect: Allow
      Action:
        - appsync:GetGraphqlApi
        - appsync:UpdateGraphqlApi
      Resource: !Ref GraphQlApi
    - Effect: Allow
      Action: iam:PassRole
      Resource: !GetAtt AppSyncLoggingServiceRole.Arn

setLogLevelErr:
  handler: functions/set-log-level.handler
  events:
    - schedule: cron(12 * * * ? *) # 12 mins past the hour every hour
  environment:
    APPSYNC_API_ID: !GetAtt GraphQlApi.ApiId
    FIELD_LOG_LEVEL: ERROR
  iamRoleStatements:
    - Effect: Allow
      Action:
        - appsync:GetGraphqlApi
        - appsync:UpdateGraphqlApi
      Resource: !Ref GraphQlApi
    - Effect: Allow
      Action: iam:PassRole
      Resource: !GetAtt AppSyncLoggingServiceRole.Arn
